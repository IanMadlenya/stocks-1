{% extends "base.html" %}
{% load humanize %}

{% block title %}One Account{% endblock %}

{% block content %}

<h2>Portfolio: Account</h2>
<hr>

<h3>{{ account.name }}</h3>

Cash: ${{ account.cash|floatformat:2|intcomma }}

<ul>
  <li><a href="deposit">Deposit Cash</a></li>
  {% if account.cash > 0 %}
  <li><a href="buy">Buy Security</a></li>
  {% endif %}
</ul>


<table>
  <tr>
    <th>Security</th>
    <th>Last Price</th>
    <th>Shares</th>
    <th>Cost Basis</th>
    <th>Mkt Value</th>
    <th>Gain</th>
    <th>Dividends</th>
    <th>Overall return</th>
  </tr>
{% for security,data in account.positions.items %}
  {% if security != '$CASH' %}
  <tr>
    <td>{{ security }}</td>
    <td>{{ data.price }}</td>
    <td>{{ data.shares }}</td>
    <td>{{ data.basis }}</td>
    <td>{{ data.mktval }}</td>
    <td>{{ data.mktval }} - {{ data.basis }}</td>
    <td>{{ data.dividends }}</td>
    <td>({{ data.mktval }} + {{ data.dividends }}) / {{ data.basis }}</td>
  </tr>
  {% endif %}
{% endfor %}
</table>

{% endblock %}
